{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export {\r\n  getUserInformation,\r\n  getAllCards,\r\n  getAllData,\r\n  setUserInformation,\r\n  setNewCard,\r\n  deleteCardFromServer,\r\n  addRemoveLikeCard,\r\n  setUserAvatar,\r\n};\r\n\r\n\r\n\r\n\r\nconst getUserInformation = (config) => {\r\n  return fetch(`${config.baseUrl}/users/me`, { headers: config.headers }).then(\r\n    (res) => {\r\n      return getResponseData(res);\r\n    }\r\n  );\r\n};\r\n\r\n\r\n\r\n\r\nconst getAllCards = (config) => {\r\n  return fetch(`${config.baseUrl}/cards`, { headers: config.headers }).then(\r\n    (res) => {\r\n      return getResponseData(res);\r\n    }\r\n  );\r\n};\r\n\r\nconst getAllData = (config) => {\r\n  return [getUserInformation(config), getAllCards(config)];\r\n};\r\n\r\nconst setUserInformation = (config, name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\nconst setNewCard = (config, name, link) => {\r\n  return fetch(`${config.baseUrl}/cards `, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// удаление карточки\r\n\r\nconst deleteCardFromServer = (config, id) => {\r\n  return fetch(`${config.baseUrl}/cards/` + id, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// установка аватара\r\n\r\nconst setUserAvatar = (config, link) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: link,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// установка/ снятие лайка\r\n\r\nconst addRemoveLikeCard = (config, id, like) => {\r\n  let _method = undefined;\r\n  if (like === true) {\r\n    _method = \"PUT\";\r\n  } else {\r\n    _method = \"DELETE\";\r\n  }\r\n\r\n  return fetch(`${config.baseUrl}/cards/likes/` + id, {\r\n    method: _method,\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// преобразование в json\r\n\r\nfunction getResponseData(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n","export { createCard, toggleLikeCallBackFunction };\r\n\r\nimport { addRemoveLikeCard } from \"./api.js\";\r\n\r\nimport { config } from \"../index.js\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\n// создание карточки\r\n\r\nfunction createCard(\r\n  card,\r\n  deleteCallBackFunction,\r\n  likeCallBackFunction,\r\n  popupCallBackFunction,\r\n  userId\r\n) {\r\n  const cardTemplateClone = cardTemplate.cloneNode(true);\r\n  const cardImage = cardTemplateClone.querySelector(\".card__image\");\r\n  const cardDeleteButton = cardTemplateClone.querySelector(\r\n    \".card__delete-button\"\r\n  );\r\n  const cardLikeButton = cardTemplateClone.querySelector(\".card__like-button\");\r\n  const cardLikeNumber = cardTemplateClone.querySelector(\".card__like-number\");\r\n  const cardTitle = cardTemplateClone.querySelector(\".card__title\");\r\n\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  cardTitle.textContent = card.name;\r\n\r\n  if (card.likes !== undefined) {\r\n    // неновая карточка\r\n    cardLikeNumber.textContent = card.likes.length;\r\n\r\n    if (card.owner._id === userId) {\r\n      // карточка данного юзера\r\n      cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n      cardDeleteButton.addEventListener(\"click\", () => {\r\n        deleteCallBackFunction(cardDeleteButton, card);\r\n      });\r\n    }\r\n\r\n    if (\r\n      card.likes.some((item) => {\r\n        return item._id === userId;\r\n      })\r\n    ) {\r\n      cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n    }\r\n  } else {\r\n    // новая карточка\r\n    cardLikeNumber.textContent = 0;\r\n    cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n    cardDeleteButton.addEventListener(\"click\", () => {\r\n      deleteCallBackFunction(cardDeleteButton, card);\r\n    });\r\n  }\r\n\r\n  cardLikeButton.addEventListener(\"click\", (evt) => {\r\n    likeCallBackFunction(evt, card._id, cardLikeNumber);\r\n  });\r\n  cardImage.addEventListener(\"click\", popupCallBackFunction);\r\n  return cardTemplateClone;\r\n}\r\n\r\n// Функция переключения like карточки c запросом на сервер\r\nfunction toggleLikeCallBackFunction(evt, cardId, cardLikeNumber) {\r\n  addRemoveLikeCard(\r\n    config,\r\n    cardId,\r\n    !evt.target.classList.contains(\"card__like-button_is-active\")\r\n  )\r\n    .then((result) => {\r\n      if (result._id === cardId) {\r\n        cardLikeNumber.textContent = result.likes.length;\r\n        evt.target.classList.toggle(\"card__like-button_is-active\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    });\r\n}\r\n","export { openModal, closeModal, addPopupCloseToEscEventListeners };\r\n\r\nconst page = document.querySelector(\".page\");\r\n\r\nfunction openModal(popupMainDiv) {\r\n  popupMainDiv.classList.add(\"popup_is-opened\");\r\n  addPopupCloseToEscEventListeners();\r\n  const form = popupMainDiv.querySelector(\".popup__form\");\r\n  form.reset();\r\n}\r\n\r\nfunction closeModal() {\r\n  const pop = document.querySelector(\".popup_is-opened\");\r\n\r\n  if (pop !== null) {\r\n    pop.classList.remove(\"popup_is-opened\");\r\n    removePopupCloseToEscEventListeners();\r\n  }\r\n}\r\n\r\n// Функции добавления / удаления слушателя закрытия по ESCkey\r\n\r\nfunction addPopupCloseToEscEventListeners() {\r\n  page.addEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n\r\n  setTimeout(function () {\r\n    page.addEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n  }, 50);\r\n}\r\n\r\nfunction removePopupCloseToEscEventListeners() {\r\n  page.removeEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n  page.removeEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n}\r\n\r\n// CallBack на Esc\r\n\r\nfunction closePopupOnClickOnEscCallBack(evt) {\r\n  if (evt.key === \"Escape\") closeModal();\r\n}\r\n\r\n// CallBack на клик мимо popup\r\n\r\nfunction closePopupOnClickOnОverlayCallBack(evt) {\r\n  if (evt.target.closest(\".popup__content\") === null) closeModal();\r\n}\r\n\r\n//===========================================================================================\r\n","export { enableValidation, clearValidation };\r\n\r\nconst checkInputValidity = (\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  if (inputElement.validity.patternMismatch)\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  else inputElement.setCustomValidity(\"\");\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      inputErrorClass,\r\n      errorClass\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, inputErrorClass, errorClass);\r\n  }\r\n};\r\n\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  inputValidationMessage,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(\r\n    `.${inputElement.name}-input-error`\r\n  );\r\n  inputElement.classList.add(inputErrorClass);\r\n  errorElement.textContent = inputValidationMessage;\r\n  errorElement.classList.add(errorClass);\r\n};\r\n\r\nconst hideInputError = (\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(\r\n    `.${inputElement.name}-input-error`\r\n  );\r\n  inputElement.classList.remove(inputErrorClass);\r\n  errorElement.classList.remove(errorClass);\r\n  errorElement.textContent = \"\";\r\n  inputElement.setCustomValidity(\"\");\r\n};\r\n\r\nconst enableValidation = (objVal) => {\r\n  const formList = Array.from(document.querySelectorAll(objVal.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    const inputList = Array.from(\r\n      formElement.querySelectorAll(objVal.inputSelector)\r\n    );\r\n\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", function () {\r\n        checkInputValidity(\r\n          formElement,\r\n          inputElement,\r\n          objVal.inputErrorClass,\r\n          objVal.errorClass\r\n        );\r\n        toggleButtonState(formElement, inputList, objVal);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (formElement, inputList, objVal) => {\r\n  const buttonElement = formElement.querySelector(objVal.submitButtonSelector);\r\n\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.setAttribute(\"disabled\", true);\r\n    buttonElement.classList.add(objVal.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.removeAttribute(\"disabled\");\r\n    buttonElement.classList.remove(objVal.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst clearValidation = (formDiv, objVal) => {\r\n  const inputList = Array.from(formDiv.querySelectorAll(objVal.inputSelector));\r\n  inputList.forEach((item) => {\r\n    hideInputError(formDiv, item, objVal.inputErrorClass, objVal.errorClass);\r\n  });\r\n\r\n  toggleButtonState(formDiv, inputList, objVal);\r\n};\r\n","import \"./styles/index.css\"; // добавьте импорт главного файла стилей\r\nimport { createCard, toggleLikeCallBackFunction } from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getAllData,\r\n  setUserInformation,\r\n  setNewCard,\r\n  deleteCardFromServer,\r\n  setUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nconst obj = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  spanErrorClass: \".form__input-error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nexport const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-18\",\r\n  headers: {\r\n    authorization: \"5f6c0717-61b9-4f4a-8c74-b03867a939b6\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\n//  DOM узлы\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupTypeImageСaption = popupTypeImage.querySelector(\".popup__caption\");\r\nconst popupTypeImageImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\r\nconst inputNameProfile = popupTypeEdit.querySelector(\"input:nth-of-type(1)\");\r\nconst inputDescriptionProfile = popupTypeEdit.querySelector(\r\n  \"input:nth-of-type(2)\"\r\n);\r\nconst deletePopup = document.querySelector(\".popup_type_delete-card\");\r\n\r\nlet idCardForDelete = 0;\r\nlet cardDeleteButton = undefined;\r\n\r\nexport { profileTitle, profileDescription };\r\n\r\n// функции с запросами к серверу\r\n\r\n// получаем  данные user и карточки\r\nfunction readAllDataFromServer(config) {\r\n  Promise.all(getAllData(config))\r\n    .then((res) => {\r\n      const [user, cards] = res;\r\n      profileTitle.textContent = user.name;\r\n      profileDescription.textContent = user.about;\r\n      profileAvatar.src = user.avatar;\r\n      profileAvatar.classList.add(\"profile__image-visible\");\r\n      addAllCards(cards, user._id);\r\n      console.log(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка. Запрос не выполнен: ${err}`);\r\n    });\r\n}\r\n\r\n//Обновление user data\r\n\r\nfunction writeUserData(config, name, about, buttonSummit) {\r\n  writeTextOfButton(buttonSummit, \"Сохранение...\");\r\n  setUserInformation(config, name, about)\r\n    .then((result) => {\r\n      if (result.name === name && result.about === about) {\r\n        profileTitle.textContent = result.name;\r\n        profileDescription.textContent = result.about;\r\n        closeModal();\r\n        console.log(\"UserData записаны на сервер\");\r\n      } else {\r\n        console.log(\"UserData НЕ записаны\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSummit, \"Сохранить\");\r\n    });\r\n}\r\n\r\n//Добавление новой карточки на сервер\r\n\r\nfunction writeNewCard(config, card, buttonSummit) {\r\n  writeTextOfButton(buttonSummit, \"Сохранение...\");\r\n  setNewCard(config, card.name, card.link)\r\n    .then((result) => {\r\n      if (result.name === card.name && result.link === card.link) {\r\n        card._id = result._id;\r\n        addOneCard(card);\r\n        closeModal();\r\n        console.log(\"Card записана на сервер\");\r\n      } else {\r\n        console.log(\"Card НЕ записана на сервер\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSummit, \"Сохранить\");\r\n    });\r\n}\r\n\r\nfunction writeTextOfButton(button, text) {\r\n  button.textContent = text;\r\n}\r\n\r\n// Функция добавления слушателя открытия  и закрытия popup по кнопкам\r\n\r\nfunction addPopupOpenCloseEventListeners(buttonOpenClass, popupMainClass) {\r\n  const openButton = document.querySelector(buttonOpenClass);\r\n  const popupMainDiv = document.querySelector(popupMainClass);\r\n  const closeButton = popupMainDiv.querySelector(\".popup__close\");\r\n\r\n  openButton.addEventListener(\"click\", function () {\r\n    openModal(popupMainDiv);\r\n    clearValidation(popupMainDiv, obj);\r\n\r\n    if (popupMainDiv.classList.contains(\"popup_type_edit\")) {\r\n      inputNameProfile.value = profileTitle.textContent;\r\n      inputDescriptionProfile.value = profileDescription.textContent;\r\n    }\r\n  });\r\n\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n// Функция добавления слушателя закрытия popup удаления карточки\r\n\r\nfunction deletePopupCloseEventListener() {\r\n  const closeButton = deletePopup.querySelector(\".popup__close\");\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n//  Функция удаления карточки\r\n\r\nfunction openPopupDeleteCard(DeleteButtonInCard, card) {\r\n  idCardForDelete = card._id;\r\n  cardDeleteButton = DeleteButtonInCard;\r\n  openModal(deletePopup);\r\n}\r\n\r\n// Функция вывода всех карточек в DOM\r\n\r\nfunction addAllCards(initialCards, userId) {\r\n  initialCards.forEach((item) =>\r\n    placesList.append(\r\n      createCard(\r\n        item,\r\n        openPopupDeleteCard,\r\n        toggleLikeCallBackFunction,\r\n        createPopupCallBackFunction,\r\n        userId\r\n      )\r\n    )\r\n  );\r\n}\r\n\r\n// Добавление одной карочки в начало DOM\r\n\r\nfunction addOneCard(card) {\r\n  placesList.prepend(\r\n    createCard(\r\n      card,\r\n      openPopupDeleteCard,\r\n      toggleLikeCallBackFunction,\r\n      createPopupCallBackFunction,\r\n      0\r\n    )\r\n  );\r\n}\r\n\r\n// Функция открытия/прорисовки/закрытия popup картинки по нажатию на картинку\r\n\r\nfunction createPopupCallBackFunction(evt) {\r\n  const card = evt.target.closest(\".card\");\r\n  const image = card.querySelector(\".card__image\");\r\n  const title = card.querySelector(\".card__title\");\r\n\r\n  openModal(popupTypeImage);\r\n  popupTypeImageСaption.textContent = title.textContent;\r\n  popupTypeImageImage.alt = image.alt;\r\n  popupTypeImageImage.src = image.src;\r\n}\r\n\r\nfunction addCallBackForImageClose() {\r\n  const imgClose = popupTypeImage.querySelector(\".popup__close\");\r\n  imgClose.addEventListener(\"click\", closeModal);\r\n}\r\n\r\n// MAIN\r\n\r\nreadAllDataFromServer(config);\r\n\r\naddPopupOpenCloseEventListeners(\".profile__edit-button\", \".popup_type_edit\");\r\naddPopupOpenCloseEventListeners(\".profile__add-button\", \".popup_type_new-card\");\r\naddPopupOpenCloseEventListeners(\".avatar\", \".popup_type_new-avatar\");\r\ndeletePopupCloseEventListener();\r\naddCallBackForImageClose();\r\n\r\n// Запуск валидации форм\r\nenableValidation(obj);\r\n\r\n// END MAIN\r\n\r\n// обработка submit-ов\r\n\r\n//  обработка submit для формы изменения профиля\r\nconst formElementEditProfile = document.forms.edit_profile;\r\nconst buttonSubmitEditProfile = formElementEditProfile.querySelector(\"button\");\r\n\r\nformElementEditProfile.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n  writeUserData(\r\n    config,\r\n    formElementEditProfile.name.value,\r\n    formElementEditProfile.description.value,\r\n    buttonSubmitEditProfile\r\n  );\r\n});\r\n\r\n//  обработка submit для формы добавления карточки\r\nconst formElementAddCard = document.forms.new_place;\r\nconst buttonSubmitAddCard = formElementAddCard.querySelector(\"button\");\r\n\r\nformElementAddCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const card = {\r\n    name: formElementAddCard.place_name.value,\r\n    link: formElementAddCard.link.value,\r\n    _id: \"\",\r\n  };\r\n  writeNewCard(config, card, buttonSubmitAddCard);\r\n});\r\n\r\n//  обработка submit  подтверждения удаления карточки\r\nconst formElementDeleteCard = document.forms.delete_card;\r\n\r\nformElementDeleteCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  deleteCardFromServer(config, idCardForDelete)\r\n    .then((result) => {\r\n      if (result.message === \"Пост удалён\") {\r\n        if (cardDeleteButton !== undefined) {\r\n          cardDeleteButton.closest(\".places__item\").remove();\r\n          closeModal();\r\n          idCardForDelete = 0;\r\n        }\r\n        console.log(\"Карточка удалена\");\r\n      } else {\r\n        console.log(\"Карточка НЕ удалена\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {});\r\n});\r\n\r\n//  обработка submit для формы изменения аватара\r\nconst formElementeditAvatar = document.forms.new_avatar;\r\nconst buttonSubmitEditAvatar = formElementeditAvatar.querySelector(\"button\");\r\n\r\nformElementeditAvatar.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n  writeTextOfButton(buttonSubmitEditAvatar, \"Сохранение...\");\r\n  setUserAvatar(config, formElementeditAvatar.avatar.value)\r\n    .then((result) => {\r\n      if (result.avatar === formElementeditAvatar.avatar.value) {\r\n        profileAvatar.src = result.avatar;\r\n        closeModal();\r\n      }\r\n      console.log(result);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSubmitEditAvatar, \"Сохранить\");\r\n    });\r\n});\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","getUserInformation","config","fetch","concat","baseUrl","headers","then","res","getResponseData","getAllCards","addRemoveLikeCard","id","like","_method","method","ok","json","Promise","reject","status","cardTemplate","document","querySelector","content","createCard","card","deleteCallBackFunction","likeCallBackFunction","popupCallBackFunction","userId","cardTemplateClone","cloneNode","cardImage","cardDeleteButton","cardLikeButton","cardLikeNumber","cardTitle","src","link","alt","name","textContent","undefined","likes","length","owner","_id","classList","remove","addEventListener","some","item","add","evt","toggleLikeCallBackFunction","cardId","target","contains","result","toggle","catch","err","console","log","page","openModal","popupMainDiv","closePopupOnClickOnEscCallBack","setTimeout","closePopupOnClickOnОverlayCallBack","reset","closeModal","pop","removeEventListener","closest","hideInputError","formElement","inputElement","inputErrorClass","errorClass","errorElement","setCustomValidity","toggleButtonState","inputList","objVal","buttonElement","submitButtonSelector","hasInvalidInput","setAttribute","inactiveButtonClass","removeAttribute","input","validity","valid","formSelector","inputSelector","spanErrorClass","authorization","placesList","popupTypeImage","popupTypeImageСaption","popupTypeImageImage","profileTitle","profileDescription","profileAvatar","popupTypeEdit","inputNameProfile","inputDescriptionProfile","deletePopup","idCardForDelete","writeTextOfButton","button","text","addPopupOpenCloseEventListeners","buttonOpenClass","popupMainClass","openButton","closeButton","formDiv","Array","from","querySelectorAll","forEach","value","openPopupDeleteCard","DeleteButtonInCard","createPopupCallBackFunction","image","title","all","getAllData","initialCards","_res","user","cards","about","avatar","append","readAllDataFromServer","patternMismatch","dataset","errorMessage","inputValidationMessage","showInputError","validationMessage","checkInputValidity","formElementEditProfile","forms","edit_profile","buttonSubmitEditProfile","preventDefault","buttonSummit","body","JSON","stringify","setUserInformation","finally","writeUserData","description","formElementAddCard","new_place","buttonSubmitAddCard","place_name","setNewCard","prepend","addOneCard","writeNewCard","delete_card","deleteCardFromServer","message","formElementeditAvatar","new_avatar","buttonSubmitEditAvatar","setUserAvatar"],"sourceRoot":""}