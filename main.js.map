{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["export { createCard,  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const deleteModal = document.querySelector(\".popup_type_delete-card\");\r\n// const closeButton = deleteModal.querySelector(\".popup__close\");\r\n\r\n// @todo: Темплейт карточки\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\n// создание карточки\r\n\r\nfunction createCard(\r\n  card,\r\n  deleteCallBackFunction,\r\n  likeCallBackFunction,\r\n  popupCallBackFunction,\r\n  userId\r\n) {\r\n\r\n  const cardTemplateClone = cardTemplate.cloneNode(true);\r\n  const cardImage = cardTemplateClone.querySelector(\".card__image\");\r\n  const cardDeleteButton = cardTemplateClone.querySelector(\".card__delete-button\");\r\n  const cardLikeButton = cardTemplateClone.querySelector(\".card__like-button\");\r\n  const cardLikeNumber = cardTemplateClone.querySelector(\".card__like-number\");\r\n  const cardTitle = cardTemplateClone.querySelector(\".card__title\");\r\n\r\n\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  cardTitle.textContent = card.name;\r\n\r\n  if(card.likes !== undefined){ // неновая карточка\r\n    cardLikeNumber.textContent = card.likes.length;\r\n    \r\n    if(card.owner._id === userId) {  // карточка данного юзера\r\n      cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n      cardDeleteButton.addEventListener(\"click\",()=>{deleteCallBackFunction(cardDeleteButton, card)});\r\n    }\r\n\r\n    if(card.likes.some((item)=>{return item._id === userId})){\r\n      cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n}\r\n\r\n  }\r\n  else{  // новая карточка\r\n  cardLikeNumber.textContent = 0;\r\n  cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n  cardDeleteButton.addEventListener(\"click\",()=>{deleteCallBackFunction(cardDeleteButton, card)});\r\n  }\r\n\r\n  \r\n  cardLikeButton.addEventListener(\"click\",(evt)=> {likeCallBackFunction(evt, card)});\r\n  cardImage.addEventListener(\"click\", popupCallBackFunction);\r\n  return cardTemplateClone;\r\n}\r\n\r\n\r\n \r\n","export { openModal, closeModal, addPopupCloseToEscEventListeners };\r\n\r\nconst page = document.querySelector(\".page\");\r\n\r\nfunction openModal(popupMainDiv) {\r\n  popupMainDiv.classList.add(\"popup_is-opened\");\r\n  addPopupCloseToEscEventListeners();\r\n}\r\n\r\nfunction closeModal() {\r\n  const pop = document.querySelector(\".popup_is-opened\");\r\n\r\n  const inputs = pop.querySelectorAll(\"input\");\r\n  inputs.forEach((item)=>item.value = '')\r\n  //debugger\r\n  if (pop !== null) {\r\n    pop.classList.remove(\"popup_is-opened\");\r\n    removePopupCloseToEscEventListeners();\r\n  }\r\n}\r\n\r\n// Функции добавления / удаления слушателя закрытия по ESCkey\r\n\r\nfunction addPopupCloseToEscEventListeners() {\r\n  page.addEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n  \r\n  setTimeout(function () {\r\n    page.addEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n  }, 50);\r\n}\r\n\r\nfunction removePopupCloseToEscEventListeners() {\r\n  page.removeEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n  page.removeEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n}\r\n\r\n// CallBack на Esc\r\n\r\nfunction closePopupOnClickOnEscCallBack(evt) {\r\n  if (evt.key === \"Escape\") closeModal();\r\n}\r\n\r\n// CallBack на клик мимо popup\r\n\r\nfunction closePopupOnClickOnОverlayCallBack(evt) {\r\n  if (evt.target.closest(\".popup__content\") === null) closeModal();\r\n}\r\n\r\n//===========================================================================================\r\n","export { enableValidation, clearValidation };\r\n\r\n// const obj =\r\n//     {\r\n//         formSelector: '.popup__form',\r\n//         inputSelector: '.popup__input',\r\n//         submitButtonSelector: '.popup__button',\r\n//         inactiveButtonClass: 'popup__button_disabled',\r\n//         inputErrorClass: 'popup__input_type_error',\r\n//         errorClass: 'popup__error_visible'\r\n//       }\r\n\r\nconst checkInputValidity = (\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.name}-input-error`);\r\n\r\n  if (inputElement.validity.patternMismatch)\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  else inputElement.setCustomValidity(\"\");\r\n\r\n  if (!inputElement.validity.valid) {\r\n    // showInputError\r\n      inputElement.classList.add(inputErrorClass);\r\n      errorElement.textContent = inputElement.validationMessage;\r\n      errorElement.classList.add(errorClass);\r\n  } else {\r\n    // hideInputError\r\n      inputElement.classList.remove(inputErrorClass);\r\n      errorElement.classList.remove(errorClass);\r\n      errorElement.textContent = \"\";\r\n  }\r\n};\r\n\r\nconst enableValidation = (objVal) => {\r\n\r\n  const formList = Array.from(document.querySelectorAll(objVal.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    const inputList = Array.from(\r\n      formElement.querySelectorAll(objVal.inputSelector)\r\n    );\r\n\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", function () {\r\n        checkInputValidity(\r\n          formElement,\r\n          inputElement,\r\n          objVal.inputErrorClass,\r\n          objVal.errorClass\r\n        );\r\n        toggleButtonState(formElement, inputList, objVal);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\n\r\n\r\nconst toggleButtonState = (formElement, inputList, objVal) => {\r\n\r\n  const buttonElement = formElement.querySelector(objVal.submitButtonSelector);\r\n\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.setAttribute(\"disabled\", true);\r\n    buttonElement.classList.add(objVal.inactiveButtonClass);\r\n  } \r\n  else {\r\n    buttonElement.removeAttribute(\"disabled\");\r\n    buttonElement.classList.remove(objVal.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst clearValidation = (profileForm, objVal) => {\r\n  const errorList = profileForm.querySelectorAll(objVal.spanErrorClass);\r\n  errorList.forEach((item) => {\r\n    item.textContent = \"\";\r\n  });\r\n\r\n  const inputList = profileForm.querySelectorAll(objVal.inputSelector);\r\n  inputList.forEach((item) => {\r\n    item.classList.remove(objVal.inputErrorClass);\r\n  });\r\n\r\n  const submitButton = profileForm.querySelector(objVal.submitButtonSelector);\r\n\r\n  if (\r\n    Array.from(inputList).every((item) => {\r\n      return item.value.length > 0;\r\n    })\r\n  ) {\r\n    submitButton.classList.remove(objVal.inactiveButtonClass);\r\n    submitButton.removeAttribute(\"disabled\");\r\n  } else {\r\n    submitButton.classList.add(objVal.inactiveButtonClass);\r\n    submitButton.setAttribute(\"disabled\", true);\r\n  }\r\n};\r\n","export {\r\n  getUserInformation, \r\n  getAllCards, \r\n  getAllData, \r\n  setUserInformation, \r\n  setNewCard, \r\n  deleteCardFromServer, \r\n  addRemoveLikeCard,\r\n  setUserAvatar\r\n };\r\n\r\n\r\n\r\n  \r\n   const getUserInformation = (config) => {\r\n     \r\n\r\n  return  fetch(`${config.baseUrl}/users/me`, \r\n        {headers: config.headers}\r\n      )\r\n    .then((res) => {\r\n        if (res.ok) {\r\n            return res.json();\r\n          }\r\n        return Promise.reject(`Ошибка (getUserInformation): ${res.status}`);\r\n    });\r\n  } \r\n\r\n  const getAllCards = (config) => {\r\n     \r\n\r\n    return  fetch(`${config.baseUrl}/cards`, \r\n          {headers: config.headers}\r\n        )\r\n      .then((res) => {\r\n          if (res.ok) {\r\n              return res.json();\r\n            }\r\n          return Promise.reject(`Ошибка (getAllCards): ${res.status}`);\r\n      });\r\n    } \r\n\r\n\r\n   const getAllData = (config)=>{\r\n\r\n    return [getUserInformation(config),getAllCards(config)];\r\n\r\n   }\r\n\r\n\r\n\r\n   const setUserInformation = (config, name,about)=>{\r\n\r\n    return  fetch(`${config.baseUrl}/users/me`, \r\n      {method: 'PATCH',\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n                 name: name,\r\n                 about: about\r\n        })\r\n\r\n      }\r\n    )\r\n  .then((res) => {\r\n      if (res.ok) {\r\n          return res.json();\r\n        }\r\n      return Promise.reject(`Ошибка (setUserInformation): ${res.status}`);\r\n  });\r\n }\r\n\r\n const setNewCard = (config, name,link)=>{\r\n\r\n  return  fetch(`${config.baseUrl}/cards `, \r\n    {method: 'POST',\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n               name: name,\r\n               link: link\r\n      })\r\n\r\n    }\r\n  )\r\n.then((res) => {\r\n    if (res.ok) {\r\n        return res.json();\r\n      }\r\n    return Promise.reject(`Ошибка (setNewCard): ${res.status}`);\r\n});\r\n}\r\n\r\n\r\n// удаление карточки\r\n\r\nconst deleteCardFromServer = (config, id)=>{\r\n\r\nreturn fetch(`${config.baseUrl}/cards/`+id, \r\n    {method: 'DELETE',\r\n      headers: config.headers\r\n    }\r\n  )\r\n.then((res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n      \r\n      }\r\n    return Promise.reject(`Ошибка (deleteCardFromServer): ${res.status}`);\r\n}); \r\n;\r\n}\r\n\r\n\r\n// установка аватара\r\n\r\nconst setUserAvatar = (config, link)=>{\r\n\r\n  return  fetch(`${config.baseUrl}/users/me/avatar`, \r\n    {method: 'PATCH',\r\n      headers: config.headers,\r\n      body: JSON.stringify({\r\n               avatar: link,\r\n               \r\n      })\r\n\r\n    }\r\n  )\r\n.then((res) => {\r\n    if (res.ok) {\r\n        return res.json();\r\n      }\r\n    return Promise.reject(`Ошибка (setUserAvatar): ${res.status}`);\r\n});\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// установка/ снятие лайка  \r\n\r\nconst addRemoveLikeCard = (config, id, like)=>{\r\n\r\n  let _method = undefined;\r\n  if(like === true){_method = 'PUT'}\r\n  else{ _method = 'DELETE' }\r\n\r\n\r\n  return fetch(`${config.baseUrl}/cards/likes/`+id, \r\n      {method: _method,\r\n        headers: config.headers\r\n      }\r\n    )\r\n  .then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n        \r\n        }\r\n      return Promise.reject(`Ошибка (addRemoveLikeCard): ${res.status}`);\r\n  }); \r\n  ;\r\n  }\r\n  ","import \"./styles/index.css\"; // добавьте импорт главного файла стилей\r\nimport { createCard } from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getAllData,\r\n  setUserInformation,\r\n  setNewCard,\r\n  deleteCardFromServer,\r\n  addRemoveLikeCard,\r\n  setUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nconst obj = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  spanErrorClass: \".form__input-error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nexport const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-18\",\r\n  headers: {\r\n    authorization: \"5f6c0717-61b9-4f4a-8c74-b03867a939b6\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\n//  DOM узлы\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupTypeImageСaption = popupTypeImage.querySelector(\".popup__caption\");\r\nconst popupTypeImageImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\r\nconst inputOne = popupTypeEdit.querySelector(\"input:nth-of-type(1)\");\r\nconst inputTwo = popupTypeEdit.querySelector(\"input:nth-of-type(2)\");\r\nconst deletePopup = document.querySelector(\".popup_type_delete-card\");\r\n\r\nlet idCardForDelete = 0;\r\nlet cardDeleteButton = undefined;\r\n\r\nexport { profileTitle, profileDescription };\r\n\r\n// функции с запросами к серверу\r\n\r\n// получаем  данные user и карточки\r\nfunction readAllDataFromServer(config) {\r\n  Promise.all(getAllData(config))\r\n    .then((res) => {\r\n      profileTitle.textContent = res[0].name;\r\n      profileDescription.textContent = res[0].about;\r\n      profileAvatar.src = res[0].avatar;\r\n      profileAvatar.classList.add(\"profile__image-visible\");\r\n      addAllCards(res[1], res[0]._id);\r\n      console.log(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка. Запрос не выполнен: ${err}`);\r\n    });\r\n}\r\n\r\n//Обновление user data\r\n\r\nfunction writeUserData(config, name, about, buttonSummit) {\r\n  buttonSummit.textContent = \"Сохранение...\";\r\n  setUserInformation(config, name, about)\r\n    .then((result) => {\r\n      if (result.name === name && result.about === about)\r\n        console.log(\"UserData записаны на сервер\");\r\n      else {\r\n        console.log(\"UserData НЕ записаны\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      buttonSummit.textContent = \"Сохранить\";\r\n      profileTitle.textContent = formElementEditProfile.name.value;\r\n      profileDescription.textContent = formElementEditProfile.description.value;\r\n      closeModal();\r\n    });\r\n}\r\n\r\n//Добавление новой карточки на сервер\r\n\r\nfunction writeNewCard(config, card, buttonSummit) {\r\n  buttonSummit.textContent = \"Сохранение...\";\r\n  setNewCard(config, card.name, card.link)\r\n    .then((result) => {\r\n      if (result.name === card.name && result.link === card.link) {\r\n        card._id = result._id;\r\n        console.log(\"Card записана на сервер\");\r\n      } else {\r\n        console.log(\"Card НЕ записана на сервер\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      buttonSummit.textContent = \"Сохранить\";\r\n      addOneCard(card);\r\n      closeModal();\r\n    });\r\n}\r\n\r\n\r\n\r\n// Функция добавления слушателя открытия  и закрытия popup по кнопкам\r\n\r\nfunction addPopupOpenCloseEventListeners(buttonOpenClass, popupMainClass) {\r\n  const openButton = document.querySelector(buttonOpenClass);\r\n  const popupMainDiv = document.querySelector(popupMainClass);\r\n  const closeButton = popupMainDiv.querySelector(\".popup__close\");\r\n\r\n  openButton.addEventListener(\"click\", function () {\r\n    if (popupMainDiv.classList.contains(\"popup_type_edit\")) {\r\n      inputOne.value = profileTitle.textContent;\r\n      inputTwo.value = profileDescription.textContent;\r\n    }\r\n\r\n    openModal(popupMainDiv);\r\n    clearValidation(popupMainDiv, obj);\r\n  });\r\n\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n// Функция добавления слушателя закрытия popup удаления карточки\r\n\r\nfunction deletePopupCloseEventListener() {\r\n  const closeButton = deletePopup.querySelector(\".popup__close\");\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n//  Функция удаления карточки\r\n\r\nfunction openPopupDeleteCard(DeleteButtonInCard, card) {\r\n  idCardForDelete = card._id;\r\n  cardDeleteButton = DeleteButtonInCard;\r\n  openModal(deletePopup);\r\n}\r\n\r\n// Функция вывода всех карточек в DOM\r\n\r\nfunction addAllCards(initialCards, userId) {\r\n  initialCards.forEach((item) =>\r\n    placesList.append(\r\n      createCard(\r\n        item,\r\n        openPopupDeleteCard,\r\n        toggleLikeCallBackFunction,\r\n        createPopupCallBackFunction,\r\n        userId\r\n      )\r\n    )\r\n  );\r\n}\r\n\r\n// Добавление одной карочки в начало DOM\r\n\r\nfunction addOneCard(card) {\r\n  placesList.prepend(\r\n    createCard(\r\n      card,\r\n      openPopupDeleteCard,\r\n      toggleLikeCallBackFunction,\r\n      createPopupCallBackFunction,\r\n      0\r\n    )\r\n  );\r\n}\r\n\r\n// Функция открытия/прорисовки/закрытия popup картинки по нажатию на картинку\r\n\r\nfunction createPopupCallBackFunction(evt) {\r\n  const card = evt.target.closest(\".card\");\r\n  const image = card.querySelector(\".card__image\");\r\n  const title = card.querySelector(\".card__title\");\r\n\r\n  popupTypeImageСaption.textContent = title.textContent;\r\n  popupTypeImageImage.alt = image.alt;\r\n  popupTypeImageImage.src = image.src;\r\n  openModal(popupTypeImage);\r\n}\r\n\r\n\r\nfunction addCallBackForImageClose() {\r\n  const imgClose = popupTypeImage.querySelector(\".popup__close\");\r\n  imgClose.addEventListener(\"click\", closeModal);\r\n}\r\n\r\n\r\n// MAIN\r\n\r\nreadAllDataFromServer(config);\r\n\r\n\r\naddPopupOpenCloseEventListeners(\".profile__edit-button\", \".popup_type_edit\");\r\naddPopupOpenCloseEventListeners(\".profile__add-button\", \".popup_type_new-card\");\r\naddPopupOpenCloseEventListeners(\".avatar\", \".popup_type_new-avatar\");\r\ndeletePopupCloseEventListener();\r\naddCallBackForImageClose();\r\n\r\n\r\n// Запуск валидации форм\r\nenableValidation(obj);\r\n\r\n\r\n// END MAIN\r\n\r\n\r\n\r\n\r\n\r\n// обработка submit-ов\r\n\r\n//  обработка submit для формы изменения профиля\r\nconst formElementEditProfile = document.forms.edit_profile;\r\nconst buttonSubmitEditProfile = formElementEditProfile.querySelector(\"button\");\r\n\r\nformElementEditProfile.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n  writeUserData(\r\n    config,\r\n    formElementEditProfile.name.value,\r\n    formElementEditProfile.description.value,\r\n    buttonSubmitEditProfile\r\n  );\r\n});\r\n\r\n\r\n\r\n\r\n//  обработка submit для формы добавления карточки\r\nconst formElementAddCard = document.forms.new_place;\r\nconst buttonSubmitAddCard = formElementAddCard.querySelector(\"button\");\r\n\r\nformElementAddCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const card = {\r\n    name: formElementAddCard.place_name.value,\r\n    link: formElementAddCard.link.value,\r\n    _id: \"\",\r\n  };\r\n  writeNewCard(config, card, buttonSubmitAddCard);\r\n});\r\n\r\n\r\n\r\n\r\n//  обработка submit  подтверждения удаления карточки\r\nconst formElementDeleteCard = document.forms.delete_card;\r\n\r\nformElementDeleteCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  deleteCardFromServer(config, idCardForDelete)\r\n    .then((result) => {\r\n      if (result.message === \"Пост удалён\") {\r\n        if (cardDeleteButton !== undefined) {\r\n          cardDeleteButton.closest(\".places__item\").remove();\r\n          idCardForDelete = 0;\r\n        }\r\n        console.log(\"Карточка удалена\");\r\n      } else {\r\n        console.log(\"Карточка НЕ удалена\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      closeModal();\r\n    });\r\n});\r\n\r\n\r\n\r\n//  обработка submit для формы изменения аватара\r\nconst formElementeditAvatar = document.forms.new_avatar;\r\nconst buttonSubmitEditAvatar = formElementeditAvatar.querySelector(\"button\");\r\n\r\nformElementeditAvatar.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  buttonSubmitEditAvatar.textContent = \"Сохранение...\";\r\n  setUserAvatar(config, formElementeditAvatar.avatar.value)\r\n    .then((result) => {\r\n      if (result.avatar === formElementeditAvatar.avatar.value) {\r\n        profileAvatar.src = result.avatar;\r\n      }\r\n      console.log(result);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      buttonSubmitEditAvatar.textContent = \"Сохранить\";\r\n      closeModal();\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n// Функция переключения like карточки c запросом на сервер\r\nfunction toggleLikeCallBackFunction(evt, card) {\r\n  addRemoveLikeCard(\r\n    config,\r\n    card._id,\r\n    !evt.target.classList.contains(\"card__like-button_is-active\")\r\n  )\r\n    .then((result) => {\r\n      if (result._id === card._id) {\r\n        evt.target\r\n          .closest(\".card__description\")\r\n          .querySelector(\".card__like-number\").textContent =\r\n          result.likes.length;\r\n        evt.target.classList.toggle(\"card__like-button_is-active\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    });\r\n}\r\n\r\n\r\n\r\n"],"names":["cardTemplate","document","querySelector","content","createCard","card","deleteCallBackFunction","likeCallBackFunction","popupCallBackFunction","userId","cardTemplateClone","cloneNode","cardImage","cardDeleteButton","cardLikeButton","cardLikeNumber","cardTitle","src","link","alt","name","textContent","undefined","likes","length","owner","_id","classList","remove","addEventListener","some","item","add","evt","page","openModal","popupMainDiv","closePopupOnClickOnEscCallBack","setTimeout","closePopupOnClickOnОverlayCallBack","closeModal","pop","querySelectorAll","forEach","value","removeEventListener","key","target","closest","objVal","hasInvalidInput","inputList","input","validity","valid","getUserInformation","config","fetch","concat","baseUrl","headers","then","res","ok","json","Promise","reject","status","getAllCards","addRemoveLikeCard","id","like","_method","method","obj","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","spanErrorClass","errorClass","authorization","placesList","popupTypeImage","popupTypeImageСaption","popupTypeImageImage","profileTitle","profileDescription","profileAvatar","popupTypeEdit","inputOne","inputTwo","deletePopup","idCardForDelete","addPopupOpenCloseEventListeners","buttonOpenClass","popupMainClass","openButton","closeButton","contains","profileForm","submitButton","Array","from","every","removeAttribute","setAttribute","clearValidation","openPopupDeleteCard","DeleteButtonInCard","createPopupCallBackFunction","image","title","all","getAllData","initialCards","about","avatar","append","toggleLikeCallBackFunction","console","log","catch","err","readAllDataFromServer","formElement","preventDefault","inputElement","errorElement","patternMismatch","setCustomValidity","dataset","errorMessage","validationMessage","checkInputValidity","buttonElement","toggleButtonState","formElementEditProfile","forms","edit_profile","buttonSubmitEditProfile","buttonSummit","body","JSON","stringify","setUserInformation","result","finally","description","writeUserData","formElementAddCard","new_place","buttonSubmitAddCard","place_name","setNewCard","prepend","addOneCard","writeNewCard","delete_card","deleteCardFromServer","message","formElementeditAvatar","new_avatar","buttonSubmitEditAvatar","toggle","setUserAvatar"],"sourceRoot":""}