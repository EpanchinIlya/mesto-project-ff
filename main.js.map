{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/modal.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const getUserInformation = (config) => {\r\n  return fetch(`${config.baseUrl}/users/me`, { headers: config.headers }).then(\r\n    (res) => {\r\n      return getResponseData(res);\r\n    }\r\n  );\r\n};\r\n\r\nconst getAllCards = (config) => {\r\n  return fetch(`${config.baseUrl}/cards`, { headers: config.headers }).then(\r\n    (res) => {\r\n      return getResponseData(res);\r\n    }\r\n  );\r\n};\r\n\r\nconst getAllData = (config) => {\r\n  return [getUserInformation(config), getAllCards(config)];\r\n};\r\n\r\nconst setUserInformation = (config, name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\nconst setNewCard = (config, name, link) => {\r\n  return fetch(`${config.baseUrl}/cards `, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// удаление карточки\r\n\r\nconst deleteCardFromServer = (config, id) => {\r\n  return fetch(`${config.baseUrl}/cards/` + id, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// установка аватара\r\n\r\nconst setUserAvatar = (config, link) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: link,\r\n    }),\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// установка/ снятие лайка\r\n\r\nconst addRemoveLikeCard = (config, id, like) => {\r\n  let _method = undefined;\r\n  if (like === true) {\r\n    _method = \"PUT\";\r\n  } else {\r\n    _method = \"DELETE\";\r\n  }\r\n\r\n  return fetch(`${config.baseUrl}/cards/likes/` + id, {\r\n    method: _method,\r\n    headers: config.headers,\r\n  }).then((res) => {\r\n    return getResponseData(res);\r\n  });\r\n};\r\n\r\n// преобразование в json\r\n\r\nfunction getResponseData(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n}\r\n\r\nexport {\r\n  getUserInformation,\r\n  getAllCards,\r\n  getAllData,\r\n  setUserInformation,\r\n  setNewCard,\r\n  deleteCardFromServer,\r\n  addRemoveLikeCard,\r\n  setUserAvatar,\r\n};\r\n","import { addRemoveLikeCard } from \"./api.js\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nconst config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-18\",\r\n  headers: {\r\n    authorization: \"5f6c0717-61b9-4f4a-8c74-b03867a939b6\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\n// создание карточки\r\n\r\nfunction createCard(\r\n  card,\r\n  deleteCallBackFunction,\r\n  likeCallBackFunction,\r\n  popupCallBackFunction,\r\n  userId\r\n) {\r\n  const cardTemplateClone = cardTemplate.cloneNode(true);\r\n  const cardImage = cardTemplateClone.querySelector(\".card__image\");\r\n  const cardDeleteButton = cardTemplateClone.querySelector(\r\n    \".card__delete-button\"\r\n  );\r\n  const cardLikeButton = cardTemplateClone.querySelector(\".card__like-button\");\r\n  const cardLikeNumber = cardTemplateClone.querySelector(\".card__like-number\");\r\n  const cardTitle = cardTemplateClone.querySelector(\".card__title\");\r\n\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  cardTitle.textContent = card.name;\r\n\r\n  if (card.likes !== undefined) {\r\n    // неновая карточка\r\n    cardLikeNumber.textContent = card.likes.length;\r\n\r\n    if (card.owner._id === userId) {\r\n      // карточка данного юзера\r\n      cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n      cardDeleteButton.addEventListener(\"click\", () => {\r\n        deleteCallBackFunction(cardDeleteButton, card);\r\n      });\r\n    }\r\n\r\n    if (\r\n      card.likes.some((item) => {\r\n        return item._id === userId;\r\n      })\r\n    ) {\r\n      cardLikeButton.classList.add(\"card__like-button_is-active\");\r\n    }\r\n  } else {\r\n    // новая карточка\r\n    cardLikeNumber.textContent = 0;\r\n    cardDeleteButton.classList.remove(\"card__delete-button_hidden\");\r\n    cardDeleteButton.addEventListener(\"click\", () => {\r\n      deleteCallBackFunction(cardDeleteButton, card);\r\n    });\r\n  }\r\n\r\n  cardLikeButton.addEventListener(\"click\", (evt) => {\r\n    likeCallBackFunction(evt, card._id, cardLikeNumber);\r\n  });\r\n  cardImage.addEventListener(\"click\", popupCallBackFunction);\r\n  return cardTemplateClone;\r\n}\r\n\r\n// Функция переключения like карточки c запросом на сервер\r\nfunction toggleLikeCallBackFunction(evt, cardId, cardLikeNumber) {\r\n  addRemoveLikeCard(\r\n    config,\r\n    cardId,\r\n    !evt.target.classList.contains(\"card__like-button_is-active\")\r\n  )\r\n    .then((result) => {\r\n      if (result._id === cardId) {\r\n        cardLikeNumber.textContent = result.likes.length;\r\n        evt.target.classList.toggle(\"card__like-button_is-active\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    });\r\n}\r\n\r\nexport { createCard, toggleLikeCallBackFunction, config };\r\n","const page = document.querySelector(\".page\");\r\n\r\nfunction openModal(popupMainDiv) {\r\n  popupMainDiv.classList.add(\"popup_is-opened\");\r\n  addPopupCloseToEscEventListeners();\r\n}\r\n\r\nfunction closeModal() {\r\n  const pop = document.querySelector(\".popup_is-opened\");\r\n\r\n  if (pop !== null) {\r\n    pop.classList.remove(\"popup_is-opened\");\r\n    removePopupCloseToEscEventListeners();\r\n  }\r\n}\r\n\r\n// Функции добавления / удаления слушателя закрытия по ESCkey\r\n\r\nfunction addPopupCloseToEscEventListeners() {\r\n  page.addEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n\r\n  setTimeout(function () {\r\n    page.addEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n  }, 50);\r\n}\r\n\r\nfunction removePopupCloseToEscEventListeners() {\r\n  page.removeEventListener(\"keydown\", closePopupOnClickOnEscCallBack);\r\n  page.removeEventListener(\"click\", closePopupOnClickOnОverlayCallBack);\r\n}\r\n\r\n// CallBack на Esc\r\n\r\nfunction closePopupOnClickOnEscCallBack(evt) {\r\n  if (evt.key === \"Escape\") closeModal();\r\n}\r\n\r\n// CallBack на клик мимо popup\r\n\r\nfunction closePopupOnClickOnОverlayCallBack(evt) {\r\n  if (evt.target.closest(\".popup__content\") === null) closeModal();\r\n}\r\n\r\nexport { openModal, closeModal, addPopupCloseToEscEventListeners };\r\n","const checkInputValidity = (\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  if (inputElement.validity.patternMismatch)\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  else inputElement.setCustomValidity(\"\");\r\n\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(\r\n      formElement,\r\n      inputElement,\r\n      inputElement.validationMessage,\r\n      inputErrorClass,\r\n      errorClass\r\n    );\r\n  } else {\r\n    hideInputError(formElement, inputElement, inputErrorClass, errorClass);\r\n  }\r\n};\r\n\r\nconst showInputError = (\r\n  formElement,\r\n  inputElement,\r\n  inputValidationMessage,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(\r\n    `.${inputElement.name}-input-error`\r\n  );\r\n  inputElement.classList.add(inputErrorClass);\r\n  errorElement.textContent = inputValidationMessage;\r\n  errorElement.classList.add(errorClass);\r\n};\r\n\r\nconst hideInputError = (\r\n  formElement,\r\n  inputElement,\r\n  inputErrorClass,\r\n  errorClass\r\n) => {\r\n  const errorElement = formElement.querySelector(\r\n    `.${inputElement.name}-input-error`\r\n  );\r\n\r\n  inputElement.classList.remove(inputErrorClass);\r\n  errorElement.classList.remove(errorClass);\r\n  errorElement.textContent = \"\";\r\n  inputElement.setCustomValidity(\"\");\r\n};\r\n\r\nconst enableValidation = (objVal) => {\r\n  const formList = Array.from(document.querySelectorAll(objVal.formSelector));\r\n\r\n  formList.forEach((formElement) => {\r\n    const inputList = Array.from(\r\n      formElement.querySelectorAll(objVal.inputSelector)\r\n    );\r\n\r\n    inputList.forEach((inputElement) => {\r\n      inputElement.addEventListener(\"input\", function () {\r\n        checkInputValidity(\r\n          formElement,\r\n          inputElement,\r\n          objVal.inputErrorClass,\r\n          objVal.errorClass\r\n        );\r\n        toggleButtonState(formElement, inputList, objVal);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (formElement, inputList, objVal) => {\r\n  const buttonElement = formElement.querySelector(objVal.submitButtonSelector);\r\n\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.setAttribute(\"disabled\", true);\r\n    buttonElement.classList.add(objVal.inactiveButtonClass);\r\n  } else {\r\n    buttonElement.removeAttribute(\"disabled\");\r\n    buttonElement.classList.remove(objVal.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((input) => {\r\n    return !input.validity.valid;\r\n  });\r\n};\r\n\r\nconst clearValidation = (formDiv, objVal) => {\r\n  const inputList = Array.from(formDiv.querySelectorAll(objVal.inputSelector));\r\n  inputList.forEach((item) => {\r\n    hideInputError(formDiv, item, objVal.inputErrorClass, objVal.errorClass);\r\n  });\r\n\r\n  toggleButtonState(formDiv, inputList, objVal);\r\n};\r\n\r\nexport { enableValidation, clearValidation };\r\n","import \"./styles/index.css\"; // добавьте импорт главного файла стилей\r\nimport {\r\n  createCard,\r\n  toggleLikeCallBackFunction,\r\n  config,\r\n} from \"./components/card.js\";\r\nimport { openModal, closeModal } from \"./components/modal.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\r\nimport {\r\n  getAllData,\r\n  setUserInformation,\r\n  setNewCard,\r\n  deleteCardFromServer,\r\n  setUserAvatar,\r\n} from \"./components/api.js\";\r\n\r\nconst obj = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  spanErrorClass: \".form__input-error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\n//  DOM узлы\r\n\r\nconst placesList = document.querySelector(\".places__list\");\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupTypeImageСaption = popupTypeImage.querySelector(\".popup__caption\");\r\nconst popupTypeImageImage = popupTypeImage.querySelector(\".popup__image\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nconst popupTypeEdit = document.querySelector(\".popup_type_edit\");\r\nconst inputNameProfile = popupTypeEdit.querySelector(\"input:nth-of-type(1)\");\r\nconst inputDescriptionProfile = popupTypeEdit.querySelector(\r\n  \"input:nth-of-type(2)\"\r\n);\r\nconst deletePopup = document.querySelector(\".popup_type_delete-card\");\r\n\r\nlet idCardForDelete = 0;\r\nlet cardDeleteButton = undefined;\r\n\r\n// функции с запросами к серверу\r\n\r\n// получаем  данные user и карточки\r\nfunction readAllDataFromServer(config) {\r\n  Promise.all(getAllData(config))\r\n    .then((res) => {\r\n      const [user, cards] = res;\r\n      profileTitle.textContent = user.name;\r\n      profileDescription.textContent = user.about;\r\n      profileAvatar.src = user.avatar;\r\n      profileAvatar.classList.add(\"profile__image-visible\");\r\n      addAllCards(cards, user._id);\r\n      console.log(res);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка. Запрос не выполнен: ${err}`);\r\n    });\r\n}\r\n\r\n//Обновление user data\r\n\r\nfunction writeUserData(config, name, about, buttonSummit) {\r\n  writeTextOfButton(buttonSummit, \"Сохранение...\");\r\n  setUserInformation(config, name, about)\r\n    .then((result) => {\r\n      if (result.name === name && result.about === about) {\r\n        profileTitle.textContent = result.name;\r\n        profileDescription.textContent = result.about;\r\n        closeModal();\r\n        console.log(\"UserData записаны на сервер\");\r\n      } else {\r\n        console.log(\"UserData НЕ записаны\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSummit, \"Сохранить\");\r\n    });\r\n}\r\n\r\n//Добавление новой карточки на сервер\r\n\r\nfunction writeNewCard(config, card, buttonSummit) {\r\n  writeTextOfButton(buttonSummit, \"Сохранение...\");\r\n  setNewCard(config, card.name, card.link)\r\n    .then((result) => {\r\n      if (result.name === card.name && result.link === card.link) {\r\n        card._id = result._id;\r\n        addOneCard(card);\r\n        closeModal();\r\n        console.log(\"Card записана на сервер\");\r\n      } else {\r\n        console.log(\"Card НЕ записана на сервер\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSummit, \"Сохранить\");\r\n    });\r\n}\r\n\r\nfunction writeTextOfButton(button, text) {\r\n  button.textContent = text;\r\n}\r\n\r\n// Функция добавления слушателя открытия  и закрытия popup по кнопкам\r\n\r\nfunction addPopupOpenCloseEventListeners(buttonOpenClass, popupMainClass) {\r\n  const openButton = document.querySelector(buttonOpenClass);\r\n  const popupMainDiv = document.querySelector(popupMainClass);\r\n  const closeButton = popupMainDiv.querySelector(\".popup__close\");\r\n  const form = popupMainDiv.querySelector(\".popup__form\");\r\n\r\n  openButton.addEventListener(\"click\", function () {\r\n    if (form !== undefined) form.reset();\r\n    openModal(popupMainDiv);\r\n    clearValidation(popupMainDiv, obj);\r\n\r\n    if (popupMainDiv.classList.contains(\"popup_type_edit\")) {\r\n      inputNameProfile.value = profileTitle.textContent;\r\n      inputDescriptionProfile.value = profileDescription.textContent;\r\n    }\r\n  });\r\n\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n// Функция добавления слушателя закрытия popup удаления карточки\r\n\r\nfunction deletePopupCloseEventListener() {\r\n  const closeButton = deletePopup.querySelector(\".popup__close\");\r\n  closeButton.addEventListener(\"click\", function () {\r\n    closeModal();\r\n  });\r\n}\r\n\r\n//  Функция удаления карточки\r\n\r\nfunction openPopupDeleteCard(DeleteButtonInCard, card) {\r\n  idCardForDelete = card._id;\r\n  cardDeleteButton = DeleteButtonInCard;\r\n  openModal(deletePopup);\r\n}\r\n\r\n// Функция вывода всех карточек в DOM\r\n\r\nfunction addAllCards(initialCards, userId) {\r\n  initialCards.forEach((item) =>\r\n    placesList.append(\r\n      createCard(\r\n        item,\r\n        openPopupDeleteCard,\r\n        toggleLikeCallBackFunction,\r\n        createPopupCallBackFunction,\r\n        userId\r\n      )\r\n    )\r\n  );\r\n}\r\n\r\n// Добавление одной карочки в начало DOM\r\n\r\nfunction addOneCard(card) {\r\n  placesList.prepend(\r\n    createCard(\r\n      card,\r\n      openPopupDeleteCard,\r\n      toggleLikeCallBackFunction,\r\n      createPopupCallBackFunction,\r\n      0\r\n    )\r\n  );\r\n}\r\n\r\n// Функция открытия/прорисовки/закрытия popup картинки по нажатию на картинку\r\n\r\nfunction createPopupCallBackFunction(evt) {\r\n  const card = evt.target.closest(\".card\");\r\n  const image = card.querySelector(\".card__image\");\r\n  const title = card.querySelector(\".card__title\");\r\n\r\n  openModal(popupTypeImage);\r\n  popupTypeImageСaption.textContent = title.textContent;\r\n  popupTypeImageImage.alt = image.alt;\r\n  popupTypeImageImage.src = image.src;\r\n}\r\n\r\nfunction addCallBackForImageClose() {\r\n  const imgClose = popupTypeImage.querySelector(\".popup__close\");\r\n  imgClose.addEventListener(\"click\", closeModal);\r\n}\r\n\r\n// MAIN\r\n\r\nreadAllDataFromServer(config);\r\naddPopupOpenCloseEventListeners(\".profile__edit-button\", \".popup_type_edit\");\r\naddPopupOpenCloseEventListeners(\".profile__add-button\", \".popup_type_new-card\");\r\naddPopupOpenCloseEventListeners(\".avatar\", \".popup_type_new-avatar\");\r\ndeletePopupCloseEventListener();\r\naddCallBackForImageClose();\r\n\r\n// Запуск валидации форм\r\nenableValidation(obj);\r\n\r\n// END MAIN\r\n\r\n// обработка submit-ов\r\n\r\n//  обработка submit для формы изменения профиля\r\nconst formElementEditProfile = document.forms.edit_profile;\r\nconst buttonSubmitEditProfile = formElementEditProfile.querySelector(\"button\");\r\n\r\nformElementEditProfile.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n  writeUserData(\r\n    config,\r\n    formElementEditProfile.name.value,\r\n    formElementEditProfile.description.value,\r\n    buttonSubmitEditProfile\r\n  );\r\n});\r\n\r\n//  обработка submit для формы добавления карточки\r\nconst formElementAddCard = document.forms.new_place;\r\nconst buttonSubmitAddCard = formElementAddCard.querySelector(\"button\");\r\n\r\nformElementAddCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  const card = {\r\n    name: formElementAddCard.place_name.value,\r\n    link: formElementAddCard.link.value,\r\n    _id: \"\",\r\n  };\r\n  writeNewCard(config, card, buttonSubmitAddCard);\r\n});\r\n\r\n//  обработка submit  подтверждения удаления карточки\r\nconst formElementDeleteCard = document.forms.delete_card;\r\n\r\nformElementDeleteCard.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n\r\n  deleteCardFromServer(config, idCardForDelete)\r\n    .then((result) => {\r\n      if (result.message === \"Пост удалён\") {\r\n        if (cardDeleteButton !== undefined) {\r\n          cardDeleteButton.closest(\".places__item\").remove();\r\n          closeModal();\r\n          idCardForDelete = 0;\r\n        }\r\n        console.log(\"Карточка удалена\");\r\n      } else {\r\n        console.log(\"Карточка НЕ удалена\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    });\r\n});\r\n\r\n//  обработка submit для формы изменения аватара\r\nconst formElementeditAvatar = document.forms.new_avatar;\r\nconst buttonSubmitEditAvatar = formElementeditAvatar.querySelector(\"button\");\r\n\r\nformElementeditAvatar.addEventListener(\"submit\", (evt) => {\r\n  evt.preventDefault();\r\n  writeTextOfButton(buttonSubmitEditAvatar, \"Сохранение...\");\r\n  setUserAvatar(config, formElementeditAvatar.avatar.value)\r\n    .then((result) => {\r\n      if (result.avatar === formElementeditAvatar.avatar.value) {\r\n        profileAvatar.src = result.avatar;\r\n        closeModal();\r\n      }\r\n      console.log(result);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err); // выводим ошибку в консоль\r\n    })\r\n    .finally(() => {\r\n      writeTextOfButton(buttonSubmitEditAvatar, \"Сохранить\");\r\n    });\r\n});\r\n"],"names":["getUserInformation","config","fetch","concat","baseUrl","headers","then","res","getResponseData","getAllCards","addRemoveLikeCard","id","like","_method","method","ok","json","Promise","reject","status","cardTemplate","document","querySelector","content","authorization","createCard","card","deleteCallBackFunction","likeCallBackFunction","popupCallBackFunction","userId","cardTemplateClone","cloneNode","cardImage","cardDeleteButton","cardLikeButton","cardLikeNumber","cardTitle","src","link","alt","name","textContent","undefined","likes","length","owner","_id","classList","remove","addEventListener","some","item","add","evt","toggleLikeCallBackFunction","cardId","target","contains","result","toggle","catch","err","console","log","page","openModal","popupMainDiv","closePopupOnClickOnEscCallBack","setTimeout","closePopupOnClickOnОverlayCallBack","closeModal","pop","removeEventListener","key","closest","hideInputError","formElement","inputElement","inputErrorClass","errorClass","errorElement","setCustomValidity","toggleButtonState","inputList","objVal","buttonElement","submitButtonSelector","hasInvalidInput","setAttribute","inactiveButtonClass","removeAttribute","input","validity","valid","obj","formSelector","inputSelector","spanErrorClass","placesList","popupTypeImage","popupTypeImageСaption","popupTypeImageImage","profileTitle","profileDescription","profileAvatar","popupTypeEdit","inputNameProfile","inputDescriptionProfile","deletePopup","idCardForDelete","writeTextOfButton","button","text","addPopupOpenCloseEventListeners","buttonOpenClass","popupMainClass","openButton","closeButton","form","formDiv","reset","Array","from","querySelectorAll","forEach","value","openPopupDeleteCard","DeleteButtonInCard","createPopupCallBackFunction","image","title","all","getAllData","initialCards","_res","user","cards","about","avatar","append","readAllDataFromServer","patternMismatch","dataset","errorMessage","inputValidationMessage","showInputError","validationMessage","checkInputValidity","formElementEditProfile","forms","edit_profile","buttonSubmitEditProfile","preventDefault","buttonSummit","body","JSON","stringify","setUserInformation","finally","writeUserData","description","formElementAddCard","new_place","buttonSubmitAddCard","place_name","setNewCard","prepend","addOneCard","writeNewCard","delete_card","deleteCardFromServer","message","formElementeditAvatar","new_avatar","buttonSubmitEditAvatar","setUserAvatar"],"sourceRoot":""}